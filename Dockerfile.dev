# Development Dockerfile with debug tools
FROM golang:1.23-alpine

WORKDIR /app

# Install development tools
RUN apk add --no-cache \
    git \
    ca-certificates \
    tzdata \
    bash \
    vim \
    curl \
    make

# Install Go development tools
RUN go install github.com/cosmtrek/air@latest && \
    go install github.com/go-delve/delve/cmd/dlv@latest && \
    go install golang.org/x/tools/cmd/goimports@latest && \
    go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest

# Copy go mod files
COPY go.mod go.sum ./
RUN go mod download

# Copy source code (will be overridden by volume mount)
COPY . .

# Development server runs with air (hot reload)
CMD ["air"]
